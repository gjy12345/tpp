{"remainingRequest":"/Users/gujianyang/IdeaProjects/cinima_admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gujianyang/IdeaProjects/cinima_admin/src/views/schedule/show-site.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/gujianyang/IdeaProjects/cinima_admin/src/views/schedule/show-site.vue","mtime":1621788745828},{"path":"/Users/gujianyang/IdeaProjects/cinima_admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gujianyang/IdeaProjects/cinima_admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/gujianyang/IdeaProjects/cinima_admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gujianyang/IdeaProjects/cinima_admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGxvYWRTaXRlIH0gZnJvbSAnQC9hcGkvc2NoZWR1bGUtZmlsbScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2hvd1NpdGUnLAogIGZpbHRlcnM6IHsKICAgIHN0YXR1c0ZpbHRlcihzdGF0dXMpIHsKICAgICAgY29uc3Qgc3RhdHVzTWFwID0gewogICAgICAgIDE6ICdzdWNjZXNzJywKICAgICAgICAwOiAnZGFuZ2VyJwogICAgICB9CiAgICAgIHJldHVybiBzdGF0dXNNYXBbc3RhdHVzXQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGluZm86IG51bGwsCiAgICAgIG5vcm1hbDogJy93eC5wbmcnLAogICAgICBsb3ZlcnM6ICcvcWx6XzAxLnBuZycsCiAgICAgIGxvdmVyc19yOiAnL3Fsel8wMi5wbmcnLAogICAgICBiYWQ6ICcvZ3oucG5nJywKICAgICAgZ2Q6ICcvZ2QucG5nJywKICAgICAgc2FsZTogJy95cy5wbmcnLAogICAgICB5eF9sb3ZlcnM6ICcveXhfcWx6XzAxLnBuZycsCiAgICAgIHl4X2xvdmVyc19yOiAnL3l4X3Fsel8wMi5wbmcnLAogICAgICBub3JtYWxfZGlzYWJsZWQ6ICcvbm9ybWFsX2p6LnBuZycsCiAgICAgIGxvdmVyc19kaXNhYmxlZDogJy9xbHpfanpfMDEucG5nJywKICAgICAgbG92ZXJzX3JfZGlzYWJsZWQ6ICcvcWx6X2p6XzAyLnBuZycsCiAgICAgIHRlbXBSb3c6IDAsCiAgICAgIHRlbXBDb2w6IDAsCiAgICAgIG1hcDogW1tdXSwKICAgICAgbG9hZGluZzogbnVsbCwKICAgICAgY29sOiAwLAogICAgICByb3c6IDAKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluZm8gPSB0aGlzLiRyb3V0ZS5xdWVyeQogICAgdGhpcy5sb2FkU2l0ZURhdGEoKQogIH0sCiAgbWV0aG9kczogewogICAgbG9hZFNpdGVEYXRhKCkgewogICAgICB0aGlzLnNldExvYWRpbmcodHJ1ZSkKICAgICAgbG9hZFNpdGUodGhpcy5pbmZvLmlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhICE9PSBudWxsICYmIHJlcy5kYXRhLmxlbmd0aCA+IDAgJiYgcmVzLmRhdGFbMF0ubGVuZ3RoID4gMCkgewogICAgICAgICAgY29uc3Qgcm93ID0gcmVzLmRhdGEubGVuZ3RoCiAgICAgICAgICBjb25zdCBjb2wgPSByZXMuZGF0YVswXS5sZW5ndGgKICAgICAgICAgIGNvbnN0IG1hcCA9IFtdCiAgICAgICAgICBmb3IgKGNvbnN0IGkgaW4gcmVzLmRhdGEpIHsKICAgICAgICAgICAgY29uc3QgaXRlbSA9IFtdCiAgICAgICAgICAgIGZvciAoY29uc3QgaiBpbiByZXMuZGF0YVtpXSkgewogICAgICAgICAgICAgIGxldCBzcmMsIHNhbGVfaW1hZ2UKICAgICAgICAgICAgICBsZXQgZGlzYWJsZWQKICAgICAgICAgICAgICBzd2l0Y2ggKHJlcy5kYXRhW2ldW2pdLnR5cGUpIHsKICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgc3JjID0gdGhpcy5ub3JtYWwKICAgICAgICAgICAgICAgICAgc2FsZV9pbWFnZSA9IHRoaXMuc2FsZQogICAgICAgICAgICAgICAgICBkaXNhYmxlZCA9IHRoaXMubm9ybWFsX2Rpc2FibGVkCiAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlIC0xOgogICAgICAgICAgICAgICAgICBzcmMgPSB0aGlzLmJhZAogICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBzcmMgPSB0aGlzLmdkCiAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIHNyYyA9IHRoaXMubG92ZXJzCiAgICAgICAgICAgICAgICAgIHNhbGVfaW1hZ2UgPSB0aGlzLnl4X2xvdmVycwogICAgICAgICAgICAgICAgICBkaXNhYmxlZCA9IHRoaXMubG92ZXJzX2Rpc2FibGVkCiAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgIHNyYyA9IHRoaXMubG92ZXJzX3IKICAgICAgICAgICAgICAgICAgc2FsZV9pbWFnZSA9IHRoaXMueXhfbG92ZXJzX3IKICAgICAgICAgICAgICAgICAgZGlzYWJsZWQgPSB0aGlzLmxvdmVyc19yX2Rpc2FibGVkCiAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChyZXMuZGF0YVtpXVtqXS5zYWxlKSB7CiAgICAgICAgICAgICAgICBzcmMgPSBzYWxlX2ltYWdlCiAgICAgICAgICAgICAgfSBlbHNlIGlmICghcmVzLmRhdGFbaV1bal0uZW5hYmxlKSB7CiAgICAgICAgICAgICAgICBzcmMgPSBkaXNhYmxlZAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpdGVtLnB1c2goewogICAgICAgICAgICAgICAgc3JjOiBzcmMsCiAgICAgICAgICAgICAgICBzYWxlOiByZXMuZGF0YVtpXVtqXS5zYWxlLAogICAgICAgICAgICAgICAgcHJpY2U6IHJlcy5kYXRhW2ldW2pdLnByaWNlLAogICAgICAgICAgICAgICAgdHlwZTogcmVzLmRhdGFbaV1bal0udHlwZSwKICAgICAgICAgICAgICAgIGVuYWJsZTogcmVzLmRhdGFbaV1bal0uZW5hYmxlCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgICAgICBtYXAucHVzaChpdGVtKQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5tYXAgPSBtYXAKICAgICAgICAgIHRoaXMucm93ID0gcm93CiAgICAgICAgICB0aGlzLmNvbCA9IGNvbAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+WKoOi9veWksei0pScsCiAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgICAgdGhpcy5zZXRMb2FkaW5nKGZhbHNlKQogICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICB0aGlzLnNldExvYWRpbmcoZmFsc2UpCiAgICAgICAgdGhyb3cgZQogICAgICB9KQogICAgfSwKICAgIGluaXRNYXAocm93LCBjb2wpIHsKICAgICAgdGhpcy5tYXAgPSBbXQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvdzsgaSsrKSB7CiAgICAgICAgY29uc3QgYXJyID0gW10KICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvbDsgaisrKSB7CiAgICAgICAgICBhcnIucHVzaCh7CiAgICAgICAgICAgIHNyYzogdGhpcy5ub3JtYWwKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIHRoaXMubWFwLnB1c2goYXJyKQogICAgICB9CiAgICB9LAogICAgc2V0TG9hZGluZyhzaG93KSB7CiAgICAgIGlmIChzaG93KSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gdGhpcy4kbG9hZGluZyh7CiAgICAgICAgICBsb2NrOiB0cnVlLAogICAgICAgICAgdGV4dDogJ0xvYWRpbmcnLAogICAgICAgICAgc3Bpbm5lcjogJ2VsLWljb24tbG9hZGluZycsCiAgICAgICAgICBiYWNrZ3JvdW5kOiAncmdiYSgwLCAwLCAwLCAwLjcpJwogICAgICAgIH0pCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5sb2FkaW5nLmNsb3NlKCkKICAgICAgfQogICAgfSwKICAgIHNob3dQcmljZShyb3cpIHsKICAgICAgY29uc29sZS5sb2cocm93KQogICAgfQogIH0KfQo="},{"version":3,"sources":["show-site.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"show-site.vue","sourceRoot":"src/views/schedule","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div class=\"filter-container\" style=\"margin: 0;padding: 0\">\n      <div class=\"el-form-item__content\" style=\"display: block;margin: 0;padding: 0\">\n        <span class=\" el-form-item__label\">影院影院:</span>\n        <span class=\" el-form-item__label\" style=\"color: deepskyblue\">\n          {{ info.cinemaPosition + ' - '+info.cinemaName + ' - '+ info.hallName }}\n        </span>\n      </div>\n      <div class=\"filter-container\">\n        <span class=\"filter-item el-form-item__label\" style=\"float: none\">已售:</span><el-image :src=\"sale\" alt=\"\" height=\"40px\" width=\"40px\" class=\"filter-item\" style=\"width: 40px;height: 40px;margin-right: 10px\" />\n        <span class=\"filter-item el-form-item__label\" style=\"float: none\">单人座:</span><el-image :src=\"normal\" alt=\"\" height=\"40px\" width=\"40px\" class=\"filter-item\" style=\"width: 40px;height: 40px;margin-right: 10px\" />\n        <span class=\"filter-item el-form-item__label\" style=\"float: none\">情侣座:</span><el-image :src=\"lovers\" alt=\"\" height=\"40px\" width=\"40px\" class=\"filter-item\" style=\"width: 40px;height: 40px\" />\n        <el-image :src=\"lovers_r\" alt=\"\" height=\"40px\" width=\"40px\" style=\"width: 40px;height: 40px;margin-right: 10px\" class=\"filter-item\" />\n        <span class=\"filter-item el-form-item__label\" style=\"float: none\">维修:</span><el-image :src=\"bad\" alt=\"\" class=\"filter-item\" height=\"40px\" width=\"40px\" style=\"width: 40px;height: 40px;margin-right: 10px\" />\n        <span class=\"filter-item el-form-item__label\" style=\"float: none\">不允许购买:</span><el-image :src=\"normal_disabled\" alt=\"\" class=\"filter-item\" height=\"40px\" width=\"40px\" style=\"width: 40px;height: 40px;margin-right: 10px\" />\n      </div>\n    </div>\n    <div class=\"screen\">\n      <div class=\"screen-text\">屏幕方向</div>\n    </div>\n    <div class=\"site_map_content\">\n      <div v-for=\"index in row\" :key=\"index\">\n        <div class=\"site_layout\">\n          <div class=\"number\" style=\"margin-right: 20px\">{{ index }}</div>\n          <div v-for=\"col_index in col\" :key=\"col_index\" style=\"width: 46px\">\n            <el-popover\n              v-if=\"map[index-1][col_index-1].type>=1 && map[index-1][col_index-1].type<=3\"\n              placement=\"top-start\"\n              title=\"票价\"\n              width=\"100\"\n              trigger=\"hover\"\n              :content=\"map[index-1][col_index-1].price + '￥'\"\n            >\n              <el-image slot=\"reference\" v-model=\"map[index-1][col_index-1].src\" :src=\"map[index-1][col_index-1].src\" alt=\"\" height=\"40px\" width=\"40px\" style=\"margin-top: 20px\" />\n            </el-popover>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { loadSite } from '@/api/schedule-film'\n\nexport default {\n  name: 'ShowSite',\n  filters: {\n    statusFilter(status) {\n      const statusMap = {\n        1: 'success',\n        0: 'danger'\n      }\n      return statusMap[status]\n    }\n  },\n  data() {\n    return {\n      info: null,\n      normal: '/wx.png',\n      lovers: '/qlz_01.png',\n      lovers_r: '/qlz_02.png',\n      bad: '/gz.png',\n      gd: '/gd.png',\n      sale: '/ys.png',\n      yx_lovers: '/yx_qlz_01.png',\n      yx_lovers_r: '/yx_qlz_02.png',\n      normal_disabled: '/normal_jz.png',\n      lovers_disabled: '/qlz_jz_01.png',\n      lovers_r_disabled: '/qlz_jz_02.png',\n      tempRow: 0,\n      tempCol: 0,\n      map: [[]],\n      loading: null,\n      col: 0,\n      row: 0\n    }\n  },\n  created() {\n    this.info = this.$route.query\n    this.loadSiteData()\n  },\n  methods: {\n    loadSiteData() {\n      this.setLoading(true)\n      loadSite(this.info.id).then(res => {\n        if (res.data !== null && res.data.length > 0 && res.data[0].length > 0) {\n          const row = res.data.length\n          const col = res.data[0].length\n          const map = []\n          for (const i in res.data) {\n            const item = []\n            for (const j in res.data[i]) {\n              let src, sale_image\n              let disabled\n              switch (res.data[i][j].type) {\n                case 1:\n                  src = this.normal\n                  sale_image = this.sale\n                  disabled = this.normal_disabled\n                  break\n                case -1:\n                  src = this.bad\n                  break\n                case 0:\n                  src = this.gd\n                  break\n                case 2:\n                  src = this.lovers\n                  sale_image = this.yx_lovers\n                  disabled = this.lovers_disabled\n                  break\n                case 3:\n                  src = this.lovers_r\n                  sale_image = this.yx_lovers_r\n                  disabled = this.lovers_r_disabled\n                  break\n              }\n              if (res.data[i][j].sale) {\n                src = sale_image\n              } else if (!res.data[i][j].enable) {\n                src = disabled\n              }\n              item.push({\n                src: src,\n                sale: res.data[i][j].sale,\n                price: res.data[i][j].price,\n                type: res.data[i][j].type,\n                enable: res.data[i][j].enable\n              })\n            }\n            map.push(item)\n          }\n          this.map = map\n          this.row = row\n          this.col = col\n        } else {\n          this.$message({\n            message: '加载失败',\n            type: 'warning'\n          })\n        }\n        this.setLoading(false)\n      }).catch(e => {\n        this.setLoading(false)\n        throw e\n      })\n    },\n    initMap(row, col) {\n      this.map = []\n      for (let i = 0; i < row; i++) {\n        const arr = []\n        for (let j = 0; j < col; j++) {\n          arr.push({\n            src: this.normal\n          })\n        }\n        this.map.push(arr)\n      }\n    },\n    setLoading(show) {\n      if (show) {\n        this.loading = this.$loading({\n          lock: true,\n          text: 'Loading',\n          spinner: 'el-icon-loading',\n          background: 'rgba(0, 0, 0, 0.7)'\n        })\n      } else {\n        this.loading.close()\n      }\n    },\n    showPrice(row) {\n      console.log(row)\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .screen{\n    width: 90%;\n    height: 50px;\n    background-color: #f3f4f6;\n    margin: 0 auto;\n  }\n  .screen-text{\n    color: #6BA2D6;\n    line-height: 50px;\n    text-align: center;\n    white-space: nowrap;\n    font-size: 20px;\n  }\n  .site_map_content{\n    width: 90%;\n    margin: 30px auto 0;\n  }\n  .number{\n    text-align: center;\n    color: #fff;\n    margin: 0;\n    border: 0;\n    font-size: 100%;\n    font-weight: 400;\n    background-color: rgba(0,0,0,.3);\n    vertical-align: baseline;\n    padding: 0 .05rem;\n    height: 40px;\n    width: 40px;\n    margin-top: 20px;\n    line-height: 40px;\n  }\n  .site_layout{\n    display: flex;\n    flex: 1;\n    margin: 0 auto;\n    justify-content: center;\n  }\n  .number{\n    width: 40px;\n  }\n</style>\n"]}]}