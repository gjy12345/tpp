{"remainingRequest":"/Users/gujianyang/IdeaProjects/cinima_admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gujianyang/IdeaProjects/cinima_admin/src/views/schedule/show-site.vue?vue&type=style&index=0&id=6e959eb9&scoped=true&lang=css&","dependencies":[{"path":"/Users/gujianyang/IdeaProjects/cinima_admin/src/views/schedule/show-site.vue","mtime":1621788745828},{"path":"/Users/gujianyang/IdeaProjects/cinima_admin/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gujianyang/IdeaProjects/cinima_admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/gujianyang/IdeaProjects/cinima_admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/gujianyang/IdeaProjects/cinima_admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gujianyang/IdeaProjects/cinima_admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5zY3JlZW57CiAgd2lkdGg6IDkwJTsKICBoZWlnaHQ6IDUwcHg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2YzZjRmNjsKICBtYXJnaW46IDAgYXV0bzsKfQouc2NyZWVuLXRleHR7CiAgY29sb3I6ICM2QkEyRDY7CiAgbGluZS1oZWlnaHQ6IDUwcHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgZm9udC1zaXplOiAyMHB4Owp9Ci5zaXRlX21hcF9jb250ZW50ewogIHdpZHRoOiA5MCU7CiAgbWFyZ2luOiAzMHB4IGF1dG8gMDsKfQoubnVtYmVyewogIHRleHQtYWxpZ246IGNlbnRlcjsKICBjb2xvcjogI2ZmZjsKICBtYXJnaW46IDA7CiAgYm9yZGVyOiAwOwogIGZvbnQtc2l6ZTogMTAwJTsKICBmb250LXdlaWdodDogNDAwOwogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsLjMpOwogIHZlcnRpY2FsLWFsaWduOiBiYXNlbGluZTsKICBwYWRkaW5nOiAwIC4wNXJlbTsKICBoZWlnaHQ6IDQwcHg7CiAgd2lkdGg6IDQwcHg7CiAgbWFyZ2luLXRvcDogMjBweDsKICBsaW5lLWhlaWdodDogNDBweDsKfQouc2l0ZV9sYXlvdXR7CiAgZGlzcGxheTogZmxleDsKICBmbGV4OiAxOwogIG1hcmdpbjogMCBhdXRvOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwp9Ci5udW1iZXJ7CiAgd2lkdGg6IDQwcHg7Cn0K"},{"version":3,"sources":["show-site.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"show-site.vue","sourceRoot":"src/views/schedule","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div class=\"filter-container\" style=\"margin: 0;padding: 0\">\n      <div class=\"el-form-item__content\" style=\"display: block;margin: 0;padding: 0\">\n        <span class=\" el-form-item__label\">影院影院:</span>\n        <span class=\" el-form-item__label\" style=\"color: deepskyblue\">\n          {{ info.cinemaPosition + ' - '+info.cinemaName + ' - '+ info.hallName }}\n        </span>\n      </div>\n      <div class=\"filter-container\">\n        <span class=\"filter-item el-form-item__label\" style=\"float: none\">已售:</span><el-image :src=\"sale\" alt=\"\" height=\"40px\" width=\"40px\" class=\"filter-item\" style=\"width: 40px;height: 40px;margin-right: 10px\" />\n        <span class=\"filter-item el-form-item__label\" style=\"float: none\">单人座:</span><el-image :src=\"normal\" alt=\"\" height=\"40px\" width=\"40px\" class=\"filter-item\" style=\"width: 40px;height: 40px;margin-right: 10px\" />\n        <span class=\"filter-item el-form-item__label\" style=\"float: none\">情侣座:</span><el-image :src=\"lovers\" alt=\"\" height=\"40px\" width=\"40px\" class=\"filter-item\" style=\"width: 40px;height: 40px\" />\n        <el-image :src=\"lovers_r\" alt=\"\" height=\"40px\" width=\"40px\" style=\"width: 40px;height: 40px;margin-right: 10px\" class=\"filter-item\" />\n        <span class=\"filter-item el-form-item__label\" style=\"float: none\">维修:</span><el-image :src=\"bad\" alt=\"\" class=\"filter-item\" height=\"40px\" width=\"40px\" style=\"width: 40px;height: 40px;margin-right: 10px\" />\n        <span class=\"filter-item el-form-item__label\" style=\"float: none\">不允许购买:</span><el-image :src=\"normal_disabled\" alt=\"\" class=\"filter-item\" height=\"40px\" width=\"40px\" style=\"width: 40px;height: 40px;margin-right: 10px\" />\n      </div>\n    </div>\n    <div class=\"screen\">\n      <div class=\"screen-text\">屏幕方向</div>\n    </div>\n    <div class=\"site_map_content\">\n      <div v-for=\"index in row\" :key=\"index\">\n        <div class=\"site_layout\">\n          <div class=\"number\" style=\"margin-right: 20px\">{{ index }}</div>\n          <div v-for=\"col_index in col\" :key=\"col_index\" style=\"width: 46px\">\n            <el-popover\n              v-if=\"map[index-1][col_index-1].type>=1 && map[index-1][col_index-1].type<=3\"\n              placement=\"top-start\"\n              title=\"票价\"\n              width=\"100\"\n              trigger=\"hover\"\n              :content=\"map[index-1][col_index-1].price + '￥'\"\n            >\n              <el-image slot=\"reference\" v-model=\"map[index-1][col_index-1].src\" :src=\"map[index-1][col_index-1].src\" alt=\"\" height=\"40px\" width=\"40px\" style=\"margin-top: 20px\" />\n            </el-popover>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { loadSite } from '@/api/schedule-film'\n\nexport default {\n  name: 'ShowSite',\n  filters: {\n    statusFilter(status) {\n      const statusMap = {\n        1: 'success',\n        0: 'danger'\n      }\n      return statusMap[status]\n    }\n  },\n  data() {\n    return {\n      info: null,\n      normal: '/wx.png',\n      lovers: '/qlz_01.png',\n      lovers_r: '/qlz_02.png',\n      bad: '/gz.png',\n      gd: '/gd.png',\n      sale: '/ys.png',\n      yx_lovers: '/yx_qlz_01.png',\n      yx_lovers_r: '/yx_qlz_02.png',\n      normal_disabled: '/normal_jz.png',\n      lovers_disabled: '/qlz_jz_01.png',\n      lovers_r_disabled: '/qlz_jz_02.png',\n      tempRow: 0,\n      tempCol: 0,\n      map: [[]],\n      loading: null,\n      col: 0,\n      row: 0\n    }\n  },\n  created() {\n    this.info = this.$route.query\n    this.loadSiteData()\n  },\n  methods: {\n    loadSiteData() {\n      this.setLoading(true)\n      loadSite(this.info.id).then(res => {\n        if (res.data !== null && res.data.length > 0 && res.data[0].length > 0) {\n          const row = res.data.length\n          const col = res.data[0].length\n          const map = []\n          for (const i in res.data) {\n            const item = []\n            for (const j in res.data[i]) {\n              let src, sale_image\n              let disabled\n              switch (res.data[i][j].type) {\n                case 1:\n                  src = this.normal\n                  sale_image = this.sale\n                  disabled = this.normal_disabled\n                  break\n                case -1:\n                  src = this.bad\n                  break\n                case 0:\n                  src = this.gd\n                  break\n                case 2:\n                  src = this.lovers\n                  sale_image = this.yx_lovers\n                  disabled = this.lovers_disabled\n                  break\n                case 3:\n                  src = this.lovers_r\n                  sale_image = this.yx_lovers_r\n                  disabled = this.lovers_r_disabled\n                  break\n              }\n              if (res.data[i][j].sale) {\n                src = sale_image\n              } else if (!res.data[i][j].enable) {\n                src = disabled\n              }\n              item.push({\n                src: src,\n                sale: res.data[i][j].sale,\n                price: res.data[i][j].price,\n                type: res.data[i][j].type,\n                enable: res.data[i][j].enable\n              })\n            }\n            map.push(item)\n          }\n          this.map = map\n          this.row = row\n          this.col = col\n        } else {\n          this.$message({\n            message: '加载失败',\n            type: 'warning'\n          })\n        }\n        this.setLoading(false)\n      }).catch(e => {\n        this.setLoading(false)\n        throw e\n      })\n    },\n    initMap(row, col) {\n      this.map = []\n      for (let i = 0; i < row; i++) {\n        const arr = []\n        for (let j = 0; j < col; j++) {\n          arr.push({\n            src: this.normal\n          })\n        }\n        this.map.push(arr)\n      }\n    },\n    setLoading(show) {\n      if (show) {\n        this.loading = this.$loading({\n          lock: true,\n          text: 'Loading',\n          spinner: 'el-icon-loading',\n          background: 'rgba(0, 0, 0, 0.7)'\n        })\n      } else {\n        this.loading.close()\n      }\n    },\n    showPrice(row) {\n      console.log(row)\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .screen{\n    width: 90%;\n    height: 50px;\n    background-color: #f3f4f6;\n    margin: 0 auto;\n  }\n  .screen-text{\n    color: #6BA2D6;\n    line-height: 50px;\n    text-align: center;\n    white-space: nowrap;\n    font-size: 20px;\n  }\n  .site_map_content{\n    width: 90%;\n    margin: 30px auto 0;\n  }\n  .number{\n    text-align: center;\n    color: #fff;\n    margin: 0;\n    border: 0;\n    font-size: 100%;\n    font-weight: 400;\n    background-color: rgba(0,0,0,.3);\n    vertical-align: baseline;\n    padding: 0 .05rem;\n    height: 40px;\n    width: 40px;\n    margin-top: 20px;\n    line-height: 40px;\n  }\n  .site_layout{\n    display: flex;\n    flex: 1;\n    margin: 0 auto;\n    justify-content: center;\n  }\n  .number{\n    width: 40px;\n  }\n</style>\n"]}]}